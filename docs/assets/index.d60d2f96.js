import{d as k,c as g,t as N,o as h,r as f,a as S,g as $,b as V,n as z,e as c,f as u,w as p,F as C,h as H,i as D,j as w,k as x,E as U,T as q,p as P,l as F,s as W,D as G,m as M,q as R,u as X,I as T,v as Y,x as j}from"./vendor.7f79e0ec.js";const K=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))n(t);new MutationObserver(t=>{for(const l of t)if(l.type==="childList")for(const i of l.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function r(t){const l={};return t.integrity&&(l.integrity=t.integrity),t.referrerpolicy&&(l.referrerPolicy=t.referrerpolicy),t.crossorigin==="use-credentials"?l.credentials="include":t.crossorigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function n(t){if(t.ep)return;t.ep=!0;const l=r(t);fetch(t.href,l)}};K();var y=(o,e)=>{for(const[r,n]of e)o[r]=n;return o};const J=k({props:["title"]}),Q={class:"header"};function Z(o,e,r,n,t,l){return h(),g("div",Q,N(o.title),1)}var B=y(J,[["render",Z],["__scopeId","data-v-7b0e27ed"]]);const ee=k({components:{nodeHeader:B},setup(){const o=f(null),e=f(0);let r=null;const n=f(""),t=f("get"),l=f({}),i=S([{value:"get",label:"GET"},{value:"post",label:"POST"}]);r=$().appContext.config.globalProperties.$df.value;const _=m=>{l.value.data.method=m,r.updateNodeDataFromId(e.value,l.value)};return V(async()=>{await z(),e.value=o.value.parentElement.parentElement.id.slice(5),l.value=r.getNodeFromId(e.value),n.value=l.value.data.url,t.value=l.value.data.method}),{el:o,url:n,method:t,options:i,updateSelect:_}}}),oe={ref:"el"},te=w("br",null,null,-1),ne=w("br",null,null,-1),le=x("https://");function ae(o,e,r,n,t,l){const i=c("nodeHeader"),_=c("el-option"),m=c("el-select"),v=c("el-input");return h(),g("div",oe,[u(i,{title:"Get/Post"}),u(m,{modelValue:o.method,"onUpdate:modelValue":e[0]||(e[0]=d=>o.method=d),placeholder:"Select",onChange:o.updateSelect,size:"small","df-method":""},{default:p(()=>[(h(!0),g(C,null,H(o.options,d=>(h(),D(_,{key:d.value,label:d.label,value:d.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue","onChange"]),te,ne,u(v,{modelValue:o.url,"onUpdate:modelValue":e[1]||(e[1]=d=>o.url=d),"df-url":"",placeholder:"Please input",size:"small"},{prepend:p(()=>[le]),_:1},8,["modelValue"])],512)}var re=y(ee,[["render",ae]]);const de=k({components:{nodeHeader:B},setup(){const o=f(null),e=f("");let r=null;const n=f(0),t=f({}),l=f(!1),i=f("rtl"),_=v=>{U.confirm("Are you sure you want to close this?").then(()=>{v()}).catch(()=>{})};r=$().appContext.config.globalProperties.$df.value;const m=v=>{t.value.data.script=v,r.updateNodeDataFromId(n.value,t.value)};return V(async()=>{await z(),n.value=o.value.parentElement.parentElement.id.slice(5),t.value=r.getNodeFromId(n.value),e.value=t.value.data.script}),{el:o,drawer:l,direction:i,handleClose:_,textarea:e,updateSelect:m}}}),A=o=>(P("data-v-f7be97b0"),o=o(),F(),o),se={ref:"el"},ie=A(()=>w("p",null,"Open in navbar",-1)),ue=x("Edit"),ce=A(()=>w("p",null,"Autosave",-1));function pe(o,e,r,n,t,l){const i=c("nodeHeader"),_=c("el-button"),m=c("el-input"),v=c("el-drawer");return h(),g("div",se,[u(i,{title:"Script"}),ie,u(_,{type:"info",size:"small",onClick:e[0]||(e[0]=d=>o.drawer=!0)},{default:p(()=>[ue]),_:1}),(h(),D(q,{to:"body"},[u(v,{modelValue:o.drawer,"onUpdate:modelValue":e[2]||(e[2]=d=>o.drawer=d),title:"Edit Optinos",direction:o.direction,"before-close":o.handleClose},{default:p(()=>[ce,u(m,{modelValue:o.textarea,"onUpdate:modelValue":e[1]||(e[1]=d=>o.textarea=d),rows:8,"df-script":"",onChange:o.updateSelect,type:"textarea",placeholder:"Please input"},null,8,["modelValue","onChange"])]),_:1},8,["modelValue","direction","before-close"])]))],512)}var fe=y(de,[["render",pe],["__scopeId","data-v-f7be97b0"]]);const we={};function _e(o,e){return h(),g("p",null,"console.log")}var me=y(we,[["render",_e]]);const ve={name:"drawflow",setup(){const o=S([{name:"Get/Post",color:"#49494970",item:"Node1",input:0,output:1},{name:"Script",color:"blue",item:"Node2",input:1,output:2},{name:"console.log",color:"#ff9900",item:"Node3",input:1,output:0}]),e=W({}),r=f(!1),n=f({}),t={version:3,h:M,render:R},l=$();l.appContext.app._context.config.globalProperties.$df=e;function i(){n.value=e.value.export(),r.value=!0}const _=a=>{a.type==="touchstart"?mobile_item_selec=a.target.closest(".drag-drawflow").getAttribute("data-node"):a.dataTransfer.setData("node",a.target.getAttribute("data-node"))},m=a=>{if(a.type==="touchend"){var s=document.elementFromPoint(mobile_last_move.touches[0].clientX,mobile_last_move.touches[0].clientY).closest("#drawflow");s!=null&&d(mobile_item_selec,mobile_last_move.touches[0].clientX,mobile_last_move.touches[0].clientY),mobile_item_selec=""}else{a.preventDefault();var b=a.dataTransfer.getData("node");d(b,a.clientX,a.clientY)}},v=a=>{a.preventDefault()};function d(a,s,b){s=s*(e.value.precanvas.clientWidth/(e.value.precanvas.clientWidth*e.value.zoom))-e.value.precanvas.getBoundingClientRect().x*(e.value.precanvas.clientWidth/(e.value.precanvas.clientWidth*e.value.zoom)),b=b*(e.value.precanvas.clientHeight/(e.value.precanvas.clientHeight*e.value.zoom))-e.value.precanvas.getBoundingClientRect().y*(e.value.precanvas.clientHeight/(e.value.precanvas.clientHeight*e.value.zoom));const E=o.find(L=>L.item==a);e.value.addNode(a,E.input,E.output,s,b,a,{},a,"vue")}return V(()=>{const a=document.getElementById("drawflow");e.value=new G(a,t,l.appContext.app._context),e.value.start(),e.value.registerNode("Node1",re,{},{}),e.value.registerNode("Node2",fe,{},{}),e.value.registerNode("Node3",me,{},{}),e.value.import({drawflow:{Home:{data:{"5":{id:5,name:"Node2",data:{script:`(req,res) => {
 console.log(req);
}`},class:"Node2",html:"Node2",typenode:"vue",inputs:{input_1:{connections:[{node:"6",input:"output_1"}]}},outputs:{output_1:{connections:[]},output_2:{connections:[]}},pos_x:1e3,pos_y:117},"6":{id:6,name:"Node1",data:{url:"localhost/add",method:"post"},class:"Node1",html:"Node1",typenode:"vue",inputs:{},outputs:{output_1:{connections:[{node:"5",output:"input_1"}]}},pos_x:137,pos_y:89}}}}})}),{exportEditor:i,listNodes:o,drag:_,drop:m,allowDrop:v,dialogVisible:r,dialogData:n}}},O=o=>(P("data-v-01c60894"),o=o(),F(),o),he=O(()=>w("h3",null,"Drawflow Example vue3",-1)),ge=x("Export"),be=["data-node"],xe=O(()=>w("span",null,"Data:",-1)),ye={class:"dialog-footer"},ke=x("Cancel"),Ne=x("Confirm");function $e(o,e,r,n,t,l){const i=c("el-button"),_=c("el-header"),m=c("el-aside"),v=c("el-main"),d=c("el-container"),a=c("el-dialog");return h(),g(C,null,[u(d,null,{default:p(()=>[u(_,{class:"header"},{default:p(()=>[he,u(i,{type:"primary",onClick:n.exportEditor},{default:p(()=>[ge]),_:1},8,["onClick"])]),_:1}),u(d,{class:"container"},{default:p(()=>[u(m,{width:"250px",class:"column"},{default:p(()=>[w("ul",null,[(h(!0),g(C,null,H(n.listNodes,s=>(h(),g("li",{key:s,draggable:"true","data-node":s.item,onDragstart:e[0]||(e[0]=b=>n.drag(b))},[w("div",{class:"node",style:X(`background: ${s.color}`)},N(s.name),5)],40,be))),128))])]),_:1}),u(v,null,{default:p(()=>[w("div",{id:"drawflow",onDrop:e[1]||(e[1]=s=>n.drop(s)),onDragover:e[2]||(e[2]=s=>n.allowDrop(s))},null,32)]),_:1})]),_:1})]),_:1}),u(a,{modelValue:n.dialogVisible,"onUpdate:modelValue":e[5]||(e[5]=s=>n.dialogVisible=s),title:"Export",width:"50%"},{footer:p(()=>[w("span",ye,[u(i,{onClick:e[3]||(e[3]=s=>n.dialogVisible=!1)},{default:p(()=>[ke]),_:1}),u(i,{type:"primary",onClick:e[4]||(e[4]=s=>n.dialogVisible=!1)},{default:p(()=>[Ne]),_:1})])]),default:p(()=>[xe,w("pre",null,[w("code",null,N(n.dialogData),1)])]),_:1},8,["modelValue"])],64)}var Ve=y(ve,[["render",$e],["__scopeId","data-v-01c60894"]]);const Ce={setup(o){return(e,r)=>(h(),D(Ve))}};console.log(T);const I=Y(Ce);I.use(j);I.use(T);I.mount("#app");
